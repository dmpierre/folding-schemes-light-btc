// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.4;

import {Script, console} from "forge-std/Script.sol";
import { NovaDecider } from "../src/BTCLightClientNovaVerifier.sol";
import { BTCLightClient } from "../src/BTCLightClient.sol";

contract DeployAndVerify is Script {

    // Calldata for first 100k blocks
    uint[7] i_z0_zi = [100000,0,148720607008399139643368409540449269583,195554949353584141652985335246347042816,100000,9165458411239663043281073488483627218,160611593144357295069611026580695416832];
    uint256[4] U_i_cmW_U_i_cmE  = [10176488541672624609726263526063878584046836357664734919162823226364283364709,10760707844881632995381627226561687256819453319729978619901565700535680541886,3711377540472579953773443688040661948620168314297516051129926194160393608649,12295955707811426061167341809639164109369788605002650555073437496318711194876];
    uint256[3] U_i_u_u_i_u_r = [16996749997804113043274853758242998050203904,1,128279822836962469847644248993130030661];
    uint256[4] U_i_x_u_i_cmW = [3090322136776338745726102844839342381560045558272619633928060565925517783584,21366851633386182872310069643046359156912260746344047738658004699984414867991,21528852998256819604991269275098523118430779284953645545331215702636934802342,530456031182958002157191344284482929338227465817824919134106124955035799273];
    uint256[4] u_i_x_cmT =[21132038615286035531550223638528856517951697391688588598828096586347214916300,17053129120793450334129732310625457902877149792668712949903078625119944820061,10084765388808216282559137821487260902359518587390788671642394444874895076259,19608220879106519814665741614716371897239293727349945821148106517695166930869];
    uint256[2] pA = [250549780997191119383476228150375645902865938131404007815055537328985664721,5845496898743426430774818310448140989407312481710744971811864190511789841929];
    uint256[2][2] pB = [[7439128292744565271190406168520542284761990719240157924964863504786577378270,16621843480680442311864308202552831827582500194929707158156933598478570580579],[778502191054187853433400271610847243581693296518452650168667141061775918500,11515647392326794237244597913233569550218327957208494374741258331575585545995]];
    uint256[2] pC = [1644792261645451396360049555612034329877277062804884042996121865917369999290,3672931309630535059316911544676581406767400447353662385225836742079726778758];
    uint256[4] challenge_W_challenge_E_kzg_evals = [5653003835037827126960293075339478050150355868319405172685939088147649763720,3528659695464693776493594443648280530609998254806496152151995156193550281747,6538899524786005572676290491296743372208058262960377849233708319153300900126,6631661282687739760417310647639437697415867599771167980624184677444382838071];
    uint256[2][2] kzg_proof = [[6235239000247395635935272127383561794588601504014971916340371482653491403940,20850001190242735884156561191288482387272433990834870407333450774602587345586],[12769007233432181530234115386354449369915509324872396816778993829335114145976,3010678631755326044919221496593349338441711599825030163907533660543903070478]];

    NovaDecider decider;
    BTCLightClient public btcLightClient;

    function setUp() public {
        decider = new NovaDecider();
        btcLightClient = new BTCLightClient(address(novaDecider));
    }

    function run() public {
        vm.broadcast();
        btcLightClient.setBlocksVerified(i_z0_zi, U_i_cmW_U_i_cmE, U_i_u_u_i_u_r, U_i_x_u_i_cmW, u_i_x_cmT, pA, pB, pC, challenge_W_challenge_E_kzg_evals, kzg_proof);
    }
}
